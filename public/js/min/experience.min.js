!function(a,b,c){function d(){this.$form=a(".personal.experience .form"),this.count_table_experience=a("*[data-table-experience-id]:last").data().tableExperienceId,this.count_table_recommendations=a("*[data-table-recommendations-id]:last").data().tableRecommendationsId,this.$key_skill=a("#key_skill"),this.$skills_td=a(".skills_td"),this.$table_organizations=a("#table_organizations"),this.$no_experience=a("#no_experience input[type=checkbox]"),this.$add_skills_hid=a(".add_skills_hid"),this.$questionRecommend=a("#questionRecommend"),this.$questionRecommendInput=a("input",this.$questionRecommend),this.$addRecommendations=a(".add_recommendations")}d.prototype.tableTemplatePosition=function(){var d=a("#table-template-experience").html();c.registerHelper("month",function(a){for(var b="",c={1:"январь",2:"февраль",3:"март",4:"апрель",5:"май",6:"июнь",7:"июль",8:"август",9:"сентябрь",10:"октябрь",11:"ноябрь",12:"декабрь"},d=1;a>=d;d++)b+="<option value='"+d+"'>"+c[d]+"</option>";return b}),c.registerHelper("year_start",function(a){for(var b="<option value='0'></option>",c=new Date,d=a;d<=c.getFullYear();++d)b+="<option value='"+d+"'>"+d+"</option>";return b}),c.registerHelper("year_finish",function(a){for(var b="<option value='0'></option>",c=new Date,d=c.getFullYear()+50;d>a;d--)b+="<option value='"+d+"'>"+d+"</option>";return b});var e=c.compile(d);return e({i:++this.count_table_experience,BASE_URL:b})},d.prototype.tableTemplateRecommendations=function(){var d=a("#table-template-recommendations").html(),e=c.compile(d);return e({i:++this.count_table_recommendations,BASE_URL:b})},d.prototype.addEventListenerFORM=function(){this.$form.on("click",{self:this},function(b){switch(b.target.className){case"add_position":b.data.self.autocompletePost();var c=b.data.self.tableTemplatePosition();a(b.target).before(c);break;case"add_recommendations":b.data.self.autocompletePost();var c=b.data.self.tableTemplateRecommendations();a(b.target).before(c),console.log("tut"),b.data.self.maskedInputInit();break;case"delete experience":a('*[data-table-experience-id="'+a(b.target).data().tableExperienceId+'"]').remove();break;case"delete recommendations":a('*[data-table-recommendations-id="'+a(b.target).data().tableRecommendationsId+'"]').remove()}})},d.prototype.addEventListenerSkills=function(){this.$skills_td.on("click",{self:this},function(c){switch(c.target.className){case"button_skill":if(c.data.self.$key_skill.val()){a(".message",c.data.self.$skills_td).text("");var d=c.data.self.$key_skill.val();c.data.self.$key_skill.val(""),c.data.self.$add_skills_hid.append("<span><input type='hidden' name='skills_hidden[]' value='"+d+"'>"+d+"<img class='delete_skills' src='"+b+"/public/img/remove.png'></span>")}break;case"delete_skills":{a(c.target).parent().text()}a(c.target).parent().remove()}})},d.prototype.autocompSkills=function(a){this.$key_skill.autocomplete({source:a})},d.prototype.autocompRegions=function(b){a(".regions").autocomplete({source:b})},d.prototype.autocompOrganization=function(b){a(".organizations").autocomplete({source:b})},d.prototype.autocomPositions=function(b){a(".positions").autocomplete({source:b})},d.prototype.autocompFieldActivities=function(b){a(".field_activities").autocomplete({source:b})},d.prototype.autocompletePost=function(){var c=this;a.post(b+"/side/autocomplete",{autocomplete:"autocomplete"}).done(function(a){a=JSON.parse(a),c.autocompSkills(JSON.parse(a.key_skills)),c.autocompRegions(JSON.parse(a.regions)),c.autocompOrganization(JSON.parse(a.organizations)),c.autocomPositions(JSON.parse(a.positions)),c.autocompFieldActivities(JSON.parse(a.field_activities))})},d.prototype.messageColor=function(){a("div.message",this.$form).filter(function(){return a(this).text()}).siblings("input").css("border","1px red solid"),a("div.message",this.$form).filter(function(){return a(this).text()}).siblings("select").css("border","1px red solid"),a("div.message",this.$form).filter(function(){return a(this).text()}).siblings("textarea").css("border","1px red solid")},d.prototype.addEventListenerNoExperience=function(){this.$no_experience.on("click",{self:this},function(b){a(this).prop("checked")===!0?b.data.self.$table_organizations.slideUp(200):b.data.self.$table_organizations.slideDown(200)})},d.prototype.checkNoExperienceChecked=function(){this.$no_experience.prop("checked")===!0&&this.$table_organizations.hide()},d.prototype.questionRecommend=function(){this.$questionRecommendInput.prop("checked")?(a(".recommendations input[type=text]").prop("disabled",!0),this.$addRecommendations.hide()):(a(".recommendations input[type=text]").prop("disabled",!1),this.$addRecommendations.show()),this.$questionRecommend.on("click",{self:this},function(b){"input"!==b.target.tagName.toLowerCase()&&b.data.self.$questionRecommendInput.prop("checked",function(a,b){return!b}),b.data.self.$questionRecommendInput.prop("checked")?(a(".recommendations input[type=text]").prop("disabled",!0).val(""),b.data.self.$addRecommendations.hide()):(a(".recommendations input[type=text]").prop("disabled",!1),b.data.self.$addRecommendations.show())})},d.prototype.maskedInputInit=function(){a(".recommend_phone").mask("375 (99) 999-99-99")},d.prototype.init=function(){this.checkNoExperienceChecked(),this.autocompletePost(),this.maskedInputInit(),this.questionRecommend(),this.addEventListenerSkills(),this.addEventListenerNoExperience(),this.addEventListenerFORM(),this.messageColor()};var e=new d;e.init()}(jQuery,BASE_URL,Handlebars,window);