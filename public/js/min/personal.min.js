!function(a,b){function c(){this.$day_birth=a("#day_birth"),this.$month_birth=a("#month_birth"),this.$year_birth=a("#year_birth"),this.day=this.$day_birth.val(),this.month=this.$month_birth.val(),this.year=this.$year_birth.val(),this.$wrapper=a(".personal"),this.$submitPersonal=a("#submitPersonal",this.$wrapper),this.$error_data=a(".data",this.$wrapper),this.$city=a("#city"),this.$nationality=a("#nationality"),this.$work_permit=a("#work_permit")}c.prototype.validateForm=function(){a("#personal_form").validate({rules:{surname:{required:!0},first_name:{required:!0},city:{required:!0}},messages:{surname:{required:"Это поле обязательно для заполнения"},first_name:{required:"Это поле обязательно для заполнения"},city:{required:"Это поле обязательно для заполнения"}}})},c.prototype.birth=function(){this.day&&this.month&&this.year?(this.$error_data.text(""),a(".data_f").css({visibility:"hidden"}),this.$submitPersonal.attr("disabled",!1)):this.day||this.month||this.year?this.day&&this.month&&this.year||(a(".data_f").css({visibility:"visible"}),this.$submitPersonal.attr("disabled","disabled"),this.$error_data.text("Некорректная дата").css({visibility:"visible",color:"red"})):(a(".data_f").css({visibility:"hidden"}),this.$submitPersonal.attr("disabled",!1),this.$error_data.css({visibility:"hidden"}))},c.prototype.birthDay=function(a){this.day=a,this.birth()},c.prototype.birthMonth=function(a){this.month=a,this.birth()},c.prototype.birthYear=function(a){this.year=a,this.birth()},c.prototype.addEventListenerBirth=function(){a("#day_birth,#month_birth,#year_birth").on("change",{self:this},function(a){if("select"===a.target.tagName.toLowerCase())switch(a.target.name){case"day_birth":a.data.self.birthDay(a.target.value);break;case"month_birth":a.data.self.birthMonth(a.target.value);break;case"year_birth":a.data.self.birthYear(a.target.value)}})},c.prototype.addEventListenerExample=function(){a("#city_example, #nationality_example, #work_permit_example").on("click",{self:this},function(b){a(b.target).parent().siblings("input").val(a(b.target).text())})},c.prototype.autocompCity=function(a){this.$city.autocomplete({source:a,autoFocus:!0,delay:500,minLength:0,position:{my:"right top",at:"right bottom"},search:function(){}})},c.prototype.autocompNationality=function(a){this.$nationality.autocomplete({source:a})},c.prototype.autocompWorkPermit=function(a){this.$work_permit.autocomplete({source:a})},c.prototype.autocompletePost=function(){var c=this;a.post(b+"/profile/autocomplete",{autocomplete:"autocomplete"}).done(function(a){a=JSON.parse(a),c.autocompCity(a),c.autocompNationality(a),c.autocompWorkPermit(a)})},c.prototype.init=function(){this.autocompletePost(),this.validateForm(),this.addEventListenerBirth(),this.addEventListenerExample()};var d=new c;d.init()}(jQuery,BASE_URL,window);