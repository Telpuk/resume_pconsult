!function(a,b,c,d,e){function f(){this.$buttonClick=null,this.$wrapperProfessArea=null,this.$listProfessArea=null,this.template=b.compile(a("#professionalArea-template").html()),this.templateBlock=b.compile(a("#professionalAreaBlock-template").html()),this.$professionalAreaBlock=a("#professionalAreaBlock"),this.$wrapperFooter=a(".wrapperFooter"),this.$closeGif=a("#closeGif"),this.countCheckboxChecked=null,this.$textSearch=null,this.dataJson=null}f.prototype.addEventListenerProfArea=function(){this.$buttonClick.on("click",{self:this},function(a){return a.data.self.$wrapperProfessArea.show(),!1}),this.$closeGif.on("click",{self:this},function(a){return a.data.self.$wrapperProfessArea.hide(),!1}),this.$professionalAreaBlock.on("click",{self:this},function(b){return"closeBlock"===b.target.className&&a(b.target).parent("p").length?a(b.target).parents("#professionalAreaBlock").html(""):"closeBlock"===b.target.className&&a(b.target).parent("li").length&&a(b.target).parent("li").remove(),!1}),this.$wrapperFooter.on("click",{self:this},function(b){if("cancel"==b.target.id)b.data.self.$wrapperProfessArea.fadeOut(100);else if("enter"==b.target.id){var c=a("#listProfessArea > ul > li input[type=checkbox]:checked"),d=[];if(c.length>0){for(var e=0;e<c.length;++e)d.push({id:a(c[e]).data("professionalAreaChildrenId"),title:a(c[e]).val()});b.data.self.$professionalAreaBlock.html(b.data.self.templateBlock({id:a(c.get(0)).data("professionalAreaId"),title:a(c.get(0)).parents("ul").siblings("span").text(),object:d})),b.data.self.$wrapperProfessArea.hide()}}return!1})},f.prototype.addEventListenerListProfessArea=function(){this.$listProfessArea.on("click",{self:this},function(b){var c=a(b.target);if("span"===b.target.tagName.toLowerCase())c.siblings("ul").toggle(),c.parent("li").toggleClass("selector_open");else if("input"===b.target.tagName.toLowerCase()){var d=c.data("professionalAreaId"),e=a('#listProfessArea > ul > li input[type=checkbox][data-professional-area-id="'+d+'"]:checked');b.data.self.countCheckboxChecked===e.length?a('#listProfessArea > ul > li input[type=checkbox][data-professional-area-id="'+d+'"]').not(":checked").prop("disabled",!0):1===e.length?a('#listProfessArea > ul > li input[type=checkbox][data-professional-area-id!="'+d+'"]').not(":checked").prop("disabled",!0):b.data.self.countCheckboxChecked>=e.length&&e.length>1?a('#listProfessArea > ul > li input[type=checkbox][data-professional-area-id="'+d+'"]').not(":checked").prop("disabled",!1):0===e.length&&a("#listProfessArea > ul > li input[type=checkbox]").prop("disabled",!1)}})},f.prototype.addEventListenerTextSearch=function(){this.$textSearch.on("keyup search",{self:this},function(b){if(b.data.self.dataJson){var c=[],d=a(this).val().trim();if(a("#listProfessArea").removeHighlight(),d){for(var e=0,f=b.data.self.dataJson.length;f>e;++e)if(b.data.self.dataJson[e].title.toLowerCase().indexOf(d.toLowerCase())>=0)c.push(b.data.self.dataJson[e]);else{for(var g={title:b.data.self.dataJson[e].title,children:[],id:b.data.self.dataJson[e].id,name:b.data.self.dataJson[e].name},h=b.data.self.dataJson[e].children,i=0,j=h.length;j>i;++i)h[i].title.toLowerCase().indexOf(d.toLowerCase())>=0&&g.children.push(h[i]);g.children.length&&c.push(g)}a("ul",b.data.self.$listProfessArea).html(b.data.self.template({object:c,status:"selector_open"})),a("#listProfessArea").highlight(d)}else a("ul",b.data.self.$listProfessArea).html(b.data.self.template({object:b.data.self.dataJson}))}})},f.prototype.init=function(b,c,d){var f=this;f.$buttonClick=a(b?b:"#profArea"),f.$wrapperProfessArea=a(c?c:"#wrapperProfessArea"),f.countCheckboxChecked=d?d:3,f.$listProfessArea=a("#listProfessArea",f.$wrapperProfessArea),f.$textSearch=a("#text-search",f.$wrapperProfessArea),a.getJSON(e+"/public/json/professional_area.json").done(function(b){f.dataJson=b,f.dataJson&&(a("ul",f.$listProfessArea).html(f.template({object:f.dataJson})),f.addEventListenerListProfessArea(),f.addEventListenerProfArea(),f.addEventListenerTextSearch())}).fail(function(){console.log("No upload json")})};var g=new f;g.init(null,null,null)}(jQuery,Handlebars,document,window,BASE_URL);