!function(a){function b(){this.$html=a("html"),this.$add_manager=a("#add_manager"),this.$form_manager=a(".form_manager"),this.$widget_right=a("#widget_right"),this.$edit_admin=a("#edit_admin"),this.$icon_user=a("#icon_user"),this.$form_user_admin=a("#form_user_admin"),this.$show_input_password=a("#show_input_password"),this.$password_content=a("#password_content"),this.$ajax_loader_admin=a("#ajax_loader_admin")}b.prototype.validateForm=function(){a("#manager_form").validate({rules:{name_first:{required:!0},login_manager:{required:!0}},messages:{name_first:{required:"Это поле обязательно для заполнения"},login_manager:{required:"Это поле обязательно для заполнения"}}})},b.prototype.createPassword=function(){a.fn.passwordStrength=function(b){function c(a){var b=a.length;b>5&&(b=5);var c=a.replace(/[0-9]/g,""),d=a.length-c.length;d>3&&(d=3);var e=a.replace(/\W/g,""),f=a.length-e.length;f>3&&(f=3);var g=a.replace(/[A-Z]/g,""),h=a.length-g.length;h>3&&(h=3);var i=10*b-20+10*d+15*f+10*h;return 0>i&&(i=0),i>100&&(i=100),i}function d(){for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$_+",b=10,c=1,d="";b>=c;)$max=a.length-1,$num=Math.floor(Math.random()*$max),$temp=a.substr($num,1),d+=$temp,c++;return d}return this.each(function(){var e=this;e.opts={},e.opts=a.extend({},a.fn.passwordStrength.defaults,b),e.div=a(e.opts.targetDiv),e.defaultClass=e.div.attr("class"),e.percents=e.opts.classes.length?100/e.opts.classes.length:100,v=a(this).keyup(function(){"undefined"==typeof el&&(this.el=a(this));var b=c(this.value),d=this.percents,e=Math.floor(b/d);b>=100&&(e=this.opts.classes.length-1),this.div.removeAttr("class").addClass(this.defaultClass).addClass(this.opts.classes[e])}).after('<a class="generate_password" href="#">Создать пароль</a>').next().click(function(){return a(this).prev().val(d()).trigger("keyup"),!1})})},a.fn.passwordStrength.defaults={classes:Array("is10","is20","is30","is40","is50","is60","is70","is80","is90","is100"),targetDiv:"#passwordStrengthDiv",cache:{}},a(document).ready(function(){a('input[name="password_manager"]').passwordStrength({targetDiv:"#passwordStrengthDiv2",classes:Array("is10","is20","is30","is40")})})},b.prototype.addEventListenerManager=function(){this.$add_manager.on("click",{self:this},function(a){a.data.self.$form_manager.slideToggle()})},b.prototype.addEventListenerWidgetRight=function(){var b=this;this.$icon_user.on("click",function(){b.$widget_right.toggleClass("open"),b.$widget_right.hasClass("open")?b.$widget_right.stop().animate({"margin-right":"0px"},500,"easeInSine"):(b.$form_user_admin.fadeOut(),b.$widget_right.stop().animate({"margin-right":"-300px"},1500,"easeOutBounce"))}),this.$edit_admin.on("click",{self:this},function(b){b.data.self.$form_user_admin.slideToggle(),a("input[type=password]",b.data.self.$password_content).each(function(b,c){a(c).val("")})}),this.$show_input_password.on("click",{self:this},function(b){b.data.self.$password_content.slideToggle(),a("input[type=password]",b.data.self.$password_content).each(function(b,c){a(c).val(""),a(c).css({border:"1px solid black"})})})},b.prototype.addEventListenerFIOContent=function(){this.$form_user_admin.on("submit change",{self:this},function(b){var c=a("#name_first",a(this)),d=a("#login",a(this)),e=a("#name_second",a(this)),f=a("#patronymic",a(this)),g=a("#password_content input[type=password]",a(this));if(""==c.val())return a(".valid",c.parent()).remove(),c.css({border:"1px solid #ff0000"}),c.parent().append('<span class="valid">Обязательно для заполнения</span>').css({color:"red"}),!1;if(c.css({border:"1px solid black"}),a(".valid",c.parent()).remove(),""==d.val())return d.css({border:"1px solid black"}),a(".valid",d.parent()).remove(),d.parent().append('<span  class="valid">Поле email не должно быть пустым</span>'),!1;var h=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;if(!h.test(d.val()))return a(".valid",d.parent()).remove(),d.css({border:"1px solid #ff0000"}),d.parent().append('<span  class="valid">Проверьте правильность ввода!</span>'),!1;if(d.css({border:"1px solid black"}),a(".valid",d.parent()).remove(),a(g[0]).val()){var i=new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$","g");if(a(".valid",b.data.self.$password_content).remove(),a(g[0]).css({border:"1px solid black"}),a(g[1]).css({border:"1px solid black"}),!i.test(a(g[0]).val()))return a(g[0]).css({border:"1px solid red"}),b.data.self.$password_content.append('<p><span class="valid">Слабый пароль</span></p>'),!1}return a(g[0]).val()&&!a(g[1]).val()?(a(".valid",b.data.self.$password_content).remove(),a(g[0]).css({border:"1px solid red"}),a(g[1]).css({border:"1px solid red"}),b.data.self.$password_content.append('<p><span  class="valid">Повторите пароль</span></p>'),!1):a(g[0]).val()&&a(g[1]).val()&&a(g[0]).val()!==a(g[1]).val()?(a(g[0]).css({border:"1px solid red"}),a(g[1]).css({border:"1px solid red"}),b.data.self.$password_content.append('<p><span class="valid">Пароли не совпадают</span></p>'),!1):("form"===b.target.tagName.toLocaleLowerCase()&&(b.data.self.$ajax_loader_admin.show(),a.post(BASE_URL+"/admincontrol/upadminajax",{ajax:"true",admin_info:{login:d.val(),name_first:c.val(),patronymic:f.val(),name_second:e.val(),password:a(g[0]).val()}}).done(function(){b.data.self.$ajax_loader_admin.hide()})),!1)})},b.prototype.addEventListenerBody=function(){this.$html.on("click",{self:this},function(b){var c=a(b.target);c.hasClass("exampleClick")&&a("input[type=search]",c.parents(".search")).val(c.text())})},b.prototype.init=function(){this.createPassword(),this.addEventListenerWidgetRight(),this.addEventListenerFIOContent(),this.addEventListenerBody(),this.addEventListenerManager(),this.validateForm()};var c=new b;c.init()}(jQuery,window);